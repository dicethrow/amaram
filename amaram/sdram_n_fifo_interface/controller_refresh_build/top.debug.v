/* Automatically generated by Amaranth 0.4.dev7+g02364a4. Do not edit. */
/* Generated by Yosys 0.13+3 (git sha1 61324cf55, clang 10.0.0-4ubuntu1 -fPIC -Os) */

(* \amaranth.hierarchy  = "top.tb.refresher.delayer" *)
(* generator = "Amaranth" *)
module delayer(sdram_clk, ui__done, ui__load, sdram_rst);
  reg \$auto$verilog_backend.cc:2083:dump_module$1  = 0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:186" *)
  wire [14:0] \$1 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:192" *)
  wire \$10 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:187" *)
  wire \$12 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:186" *)
  wire [14:0] \$2 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:182" *)
  wire [14:0] \$4 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:186" *)
  wire [14:0] \$6 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:186" *)
  wire \$7 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:175" *)
  reg _ui__done = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:175" *)
  reg \_ui__done$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:175" *)
  reg [23:0] _ui__load = 24'h000000;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:175" *)
  reg [23:0] \_ui__load$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:182" *)
  reg [13:0] countdown = 14'h0000;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:182" *)
  reg [13:0] \countdown$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:53" *)
  input sdram_clk;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:53" *)
  input sdram_rst;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:84" *)
  output ui__done;
  reg ui__done = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:84" *)
  reg \ui__done$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:84" *)
  input [23:0] ui__load;
  assign \$10  = | (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:192" *) _ui__load;
  assign \$12  = countdown == (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:187" *) 1'h1;
  always @(posedge sdram_clk)
    ui__done <= \ui__done$next ;
  always @(posedge sdram_clk)
    _ui__load <= \_ui__load$next ;
  always @(posedge sdram_clk)
    countdown <= \countdown$next ;
  always @(posedge sdram_clk)
    _ui__done <= \_ui__done$next ;
  assign \$2  = countdown - (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:186" *) 1'h1;
  assign \$4  = + (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:182" *) countdown;
  assign \$7  = countdown > (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:186" *) 1'h0;
  assign \$6  = \$7  ? (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:186" *) \$2  : \$4 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$1 ) begin end
    \ui__done$next  = _ui__done;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \ui__done$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$1 ) begin end
    \_ui__load$next  = ui__load;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__load$next  = 24'h000000;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$1 ) begin end
    \countdown$next  = \$6 [13:0];
    (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:192" *)
    casez (\$10 )
      /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:192" */
      1'h1:
          \countdown$next  = _ui__load[13:0];
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \countdown$next  = 14'h0000;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$1 ) begin end
    \_ui__done$next  = \$12 ;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__done$next  = 1'h0;
    endcase
  end
  assign \$1  = \$6 ;
endmodule

(* \amaranth.hierarchy  = "top.ecp5pll" *)
(* generator = "Amaranth" *)
module ecp5pll(clk25_0__io, sdram_clk, clk);
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:52" *)
  output clk;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input clk25_0__io;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/ECP5PLL.py:29" *)
  wire locked;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/ECP5PLL.py:28" *)
  wire reset;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:53" *)
  output sdram_clk;
  (* FREQUENCY_PIN_CLKI = "25.0" *)
  (* ICP_CURRENT = "6" *)
  (* LPF_RESISTOR = "16" *)
  (* MFG_ENABLE_FILTEROPAMP = "1" *)
  (* MFG_GMCREF_SEL = "2" *)
  EHXPLLL #(
    .CLKFB_DIV(32'd17),
    .CLKI_DIV(32'd1),
    .CLKOP_CPHASE(32'd17),
    .CLKOP_DIV(32'd17),
    .CLKOP_ENABLE("ENABLED"),
    .CLKOP_FPHASE(32'd0),
    .CLKOS3_DIV(32'd1),
    .CLKOS3_ENABLE("ENABLED"),
    .CLKOS_CPHASE(32'd3),
    .CLKOS_DIV(32'd3),
    .CLKOS_ENABLE("ENABLED"),
    .CLKOS_FPHASE(32'd0),
    .FEEDBK_PATH("INT_OS3")
  ) \U$$0  (
    .CLKI(clk25_0__io),
    .CLKOP(clk),
    .CLKOS(sdram_clk),
    .LOCK(locked),
    .RST(1'h0)
  );
  assign reset = 1'h0;
endmodule

(* \amaranth.hierarchy  = "top.i_button_ffsync" *)
(* generator = "Amaranth" *)
module i_button_ffsync(i_unsync_buttons__fireA, i_unsync_buttons__fireB, i_unsync_buttons__up, i_unsync_buttons__down, i_unsync_buttons__left, i_unsync_buttons__right, i_buttons__pwr, i_buttons__left, rst, i_buttons__right, clk, i_unsync_buttons__pwr);
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:52" *)
  input clk;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:94" *)
  wire i_buttons__down;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:94" *)
  wire i_buttons__fireA;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:94" *)
  wire i_buttons__fireB;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:94" *)
  output i_buttons__left;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:94" *)
  output i_buttons__pwr;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:94" *)
  output i_buttons__right;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:94" *)
  wire i_buttons__up;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  input i_unsync_buttons__down;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  input i_unsync_buttons__fireA;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  input i_unsync_buttons__fireB;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  input i_unsync_buttons__left;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  input i_unsync_buttons__pwr;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  input i_unsync_buttons__right;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  input i_unsync_buttons__up;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:52" *)
  input rst;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/lib/cdc.py:89" *)
  reg [6:0] stage0 = 7'h00;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/lib/cdc.py:89" *)
  wire [6:0] \stage0$next ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/lib/cdc.py:89" *)
  reg [6:0] stage1 = 7'h00;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/lib/cdc.py:89" *)
  wire [6:0] \stage1$next ;
  always @(posedge clk)
    stage0 <= \stage0$next ;
  always @(posedge clk)
    stage1 <= \stage1$next ;
  assign { i_buttons__right, i_buttons__left, i_buttons__down, i_buttons__up, i_buttons__fireB, i_buttons__fireA, i_buttons__pwr } = stage1;
  assign \stage1$next  = stage0;
  assign \stage0$next  = { i_unsync_buttons__right, i_unsync_buttons__left, i_unsync_buttons__down, i_unsync_buttons__up, i_unsync_buttons__fireB, i_unsync_buttons__fireA, i_unsync_buttons__pwr };
endmodule

(* \amaranth.hierarchy  = "top.pin_button_down_0" *)
(* generator = "Amaranth" *)
module pin_button_down_0(button_down_0__io, button_down_0__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output button_down_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_down_0__io;
  IB button_down_0_0 (
    .I(button_down_0__io),
    .O(button_down_0__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_button_fire_0" *)
(* generator = "Amaranth" *)
module pin_button_fire_0(button_fire_0__io, button_fire_0__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output button_fire_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_fire_0__io;
  IB button_fire_0_0 (
    .I(button_fire_0__io),
    .O(button_fire_0__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_button_fire_1" *)
(* generator = "Amaranth" *)
module pin_button_fire_1(button_fire_1__io, button_fire_1__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output button_fire_1__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_fire_1__io;
  IB button_fire_1_0 (
    .I(button_fire_1__io),
    .O(button_fire_1__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_button_left_0" *)
(* generator = "Amaranth" *)
module pin_button_left_0(button_left_0__io, button_left_0__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output button_left_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_left_0__io;
  IB button_left_0_0 (
    .I(button_left_0__io),
    .O(button_left_0__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_button_pwr_0" *)
(* generator = "Amaranth" *)
module pin_button_pwr_0(button_pwr_0__io, button_pwr_0__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/vendor/lattice_ecp5.py:465" *)
  wire \$1 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output button_pwr_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/vendor/lattice_ecp5.py:464" *)
  wire button_pwr_0__i_n;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_pwr_0__io;
  assign \$1  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/vendor/lattice_ecp5.py:465" *) button_pwr_0__i_n;
  IB button_pwr_0_0 (
    .I(button_pwr_0__io),
    .O(button_pwr_0__i_n)
  );
  assign button_pwr_0__i = \$1 ;
endmodule

(* \amaranth.hierarchy  = "top.pin_button_right_0" *)
(* generator = "Amaranth" *)
module pin_button_right_0(button_right_0__io, button_right_0__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output button_right_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_right_0__io;
  IB button_right_0_0 (
    .I(button_right_0__io),
    .O(button_right_0__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_button_up_0" *)
(* generator = "Amaranth" *)
module pin_button_up_0(button_up_0__io, button_up_0__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output button_up_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_up_0__io;
  IB button_up_0_0 (
    .I(button_up_0__io),
    .O(button_up_0__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_esp32_spi_0__en" *)
(* generator = "Amaranth" *)
module pin_esp32_spi_0__en(esp32_spi_0__en__io, esp32_spi_0__en__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output esp32_spi_0__en__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input esp32_spi_0__en__o;
  OB esp32_spi_0__en_0 (
    .I(esp32_spi_0__en__o),
    .O(esp32_spi_0__en__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_esp32_spi_0__gpio0" *)
(* generator = "Amaranth" *)
module pin_esp32_spi_0__gpio0(esp32_spi_0__gpio0__io, esp32_spi_0__gpio0__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/vendor/lattice_ecp5.py:531" *)
  wire \$1 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire esp32_spi_0__gpio0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  inout esp32_spi_0__gpio0__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input esp32_spi_0__gpio0__o;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire esp32_spi_0__gpio0__oe;
  BB esp32_spi_0__gpio0_0 (
    .B(esp32_spi_0__gpio0__io),
    .I(esp32_spi_0__gpio0__o),
    .O(esp32_spi_0__gpio0__i),
    .T(1'h1)
  );
  assign esp32_spi_0__gpio0__oe = 1'h0;
  assign \$1  = 1'h1;
endmodule

(* \amaranth.hierarchy  = "top.pin_esp32_spi_0__gpio12_cipo" *)
(* generator = "Amaranth" *)
module pin_esp32_spi_0__gpio12_cipo(esp32_spi_0__gpio12_cipo__io);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output esp32_spi_0__gpio12_cipo__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire esp32_spi_0__gpio12_cipo__o;
  OB esp32_spi_0__gpio12_cipo_0 (
    .I(1'h0),
    .O(esp32_spi_0__gpio12_cipo__io)
  );
  assign esp32_spi_0__gpio12_cipo__o = 1'h0;
endmodule

(* \amaranth.hierarchy  = "top.pin_esp32_spi_0__gpio16_sclk" *)
(* generator = "Amaranth" *)
module pin_esp32_spi_0__gpio16_sclk(esp32_spi_0__gpio16_sclk__io);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire esp32_spi_0__gpio16_sclk__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input esp32_spi_0__gpio16_sclk__io;
  IB esp32_spi_0__gpio16_sclk_0 (
    .I(esp32_spi_0__gpio16_sclk__io),
    .O(esp32_spi_0__gpio16_sclk__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_esp32_spi_0__gpio4_copi" *)
(* generator = "Amaranth" *)
module pin_esp32_spi_0__gpio4_copi(esp32_spi_0__gpio4_copi__io);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire esp32_spi_0__gpio4_copi__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input esp32_spi_0__gpio4_copi__io;
  IB esp32_spi_0__gpio4_copi_0 (
    .I(esp32_spi_0__gpio4_copi__io),
    .O(esp32_spi_0__gpio4_copi__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_esp32_spi_0__gpio5_cs" *)
(* generator = "Amaranth" *)
module pin_esp32_spi_0__gpio5_cs(esp32_spi_0__gpio5_cs__io);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/vendor/lattice_ecp5.py:465" *)
  wire \$1 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire esp32_spi_0__gpio5_cs__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/vendor/lattice_ecp5.py:464" *)
  wire esp32_spi_0__gpio5_cs__i_n;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input esp32_spi_0__gpio5_cs__io;
  assign \$1  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/vendor/lattice_ecp5.py:465" *) esp32_spi_0__gpio5_cs__i_n;
  IB esp32_spi_0__gpio5_cs_0 (
    .I(esp32_spi_0__gpio5_cs__io),
    .O(esp32_spi_0__gpio5_cs__i_n)
  );
  assign esp32_spi_0__gpio5_cs__i = \$1 ;
endmodule

(* \amaranth.hierarchy  = "top.pin_esp32_spi_0__rx" *)
(* generator = "Amaranth" *)
module pin_esp32_spi_0__rx(esp32_spi_0__rx__io, esp32_spi_0__rx__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output esp32_spi_0__rx__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input esp32_spi_0__rx__io;
  IB esp32_spi_0__rx_0 (
    .I(esp32_spi_0__rx__io),
    .O(esp32_spi_0__rx__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_esp32_spi_0__tx" *)
(* generator = "Amaranth" *)
module pin_esp32_spi_0__tx(esp32_spi_0__tx__io, esp32_spi_0__tx__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output esp32_spi_0__tx__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input esp32_spi_0__tx__o;
  OB esp32_spi_0__tx_0 (
    .I(esp32_spi_0__tx__o),
    .O(esp32_spi_0__tx__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_led_0" *)
(* generator = "Amaranth" *)
module pin_led_0(led_0__io, led_0__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_0__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input led_0__o;
  OB led_0_0 (
    .I(led_0__o),
    .O(led_0__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_led_1" *)
(* generator = "Amaranth" *)
module pin_led_1(led_1__io, led_1__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_1__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input led_1__o;
  OB led_1_0 (
    .I(led_1__o),
    .O(led_1__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_led_2" *)
(* generator = "Amaranth" *)
module pin_led_2(led_2__io, led_2__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_2__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input led_2__o;
  OB led_2_0 (
    .I(led_2__o),
    .O(led_2__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_led_3" *)
(* generator = "Amaranth" *)
module pin_led_3(led_3__io, led_3__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_3__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input led_3__o;
  OB led_3_0 (
    .I(led_3__o),
    .O(led_3__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_led_4" *)
(* generator = "Amaranth" *)
module pin_led_4(led_4__io, led_4__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_4__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input led_4__o;
  OB led_4_0 (
    .I(led_4__o),
    .O(led_4__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_led_5" *)
(* generator = "Amaranth" *)
module pin_led_5(led_5__io, led_5__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_5__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input led_5__o;
  OB led_5_0 (
    .I(led_5__o),
    .O(led_5__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_led_6" *)
(* generator = "Amaranth" *)
module pin_led_6(led_6__io, led_6__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_6__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input led_6__o;
  OB led_6_0 (
    .I(led_6__o),
    .O(led_6__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_led_7" *)
(* generator = "Amaranth" *)
module pin_led_7(led_7__io, led_7__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_7__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input led_7__o;
  OB led_7_0 (
    .I(led_7__o),
    .O(led_7__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_uart_0__dtr" *)
(* generator = "Amaranth" *)
module pin_uart_0__dtr(uart_0__dtr__io, uart_0__dtr__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output uart_0__dtr__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input uart_0__dtr__io;
  IB uart_0__dtr_0 (
    .I(uart_0__dtr__io),
    .O(uart_0__dtr__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_uart_0__rts" *)
(* generator = "Amaranth" *)
module pin_uart_0__rts(uart_0__rts__io, uart_0__rts__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output uart_0__rts__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input uart_0__rts__io;
  IB uart_0__rts_0 (
    .I(uart_0__rts__io),
    .O(uart_0__rts__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_uart_0__rx" *)
(* generator = "Amaranth" *)
module pin_uart_0__rx(uart_0__rx__io, uart_0__rx__i);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  output uart_0__rx__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input uart_0__rx__io;
  IB uart_0__rx_0 (
    .I(uart_0__rx__io),
    .O(uart_0__rx__i)
  );
endmodule

(* \amaranth.hierarchy  = "top.pin_uart_0__tx" *)
(* generator = "Amaranth" *)
module pin_uart_0__tx(uart_0__tx__io, uart_0__tx__o);
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output uart_0__tx__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  input uart_0__tx__o;
  OB uart_0__tx_0 (
    .I(uart_0__tx__o),
    .O(uart_0__tx__io)
  );
endmodule

(* \amaranth.hierarchy  = "top.tb.refresher" *)
(* generator = "Amaranth" *)
module refresher(ui__enable_refresh, ui__refresh_in_progress, ui__refresh_lapsed, sdram_rst, sdram_clk, ui__request_to_refresh_soon);
  reg \$auto$verilog_backend.cc:2083:dump_module$2  = 0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:243" *)
  wire [23:0] \$10 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:245" *)
  wire [23:0] \$11 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:243" *)
  wire [23:0] \$13 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:244" *)
  wire \$14 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:138" *)
  wire [23:0] \$17 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:138" *)
  wire [23:0] \$18 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:141" *)
  wire \$20 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:150" *)
  wire \$22 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:125" *)
  wire \$24 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:125" *)
  wire \$27 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:131" *)
  wire [23:0] \$3 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/ast.py:254" *)
  wire [1:0] \$32 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:123" *)
  wire \$34 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/ast.py:254" *)
  wire [1:0] \$36 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:123" *)
  wire \$38 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:131" *)
  wire [23:0] \$4 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:202" *)
  wire \$40 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:213" *)
  wire \$42 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:231" *)
  wire \$44 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:213" *)
  wire \$46 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:231" *)
  wire \$48 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:131" *)
  wire [23:0] \$6 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:131" *)
  wire \$7 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  reg [12:0] _controller_pin_ui__ios__a = 13'h0000;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  reg [12:0] \_controller_pin_ui__ios__a$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  wire [1:0] _controller_pin_ui__ios__ba;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  reg [15:0] _controller_pin_ui__ios__cipo_dq = 16'h0000;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  reg [15:0] \_controller_pin_ui__ios__cipo_dq$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  reg _controller_pin_ui__ios__clk_en = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  reg \_controller_pin_ui__ios__clk_en$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  reg [3:0] _controller_pin_ui__ios__cmd = 4'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  reg [3:0] \_controller_pin_ui__ios__cmd$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  wire [15:0] _controller_pin_ui__ios__copi_dq;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:106" *)
  wire _controller_pin_ui__ios__dqm;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:105" *)
  reg _ui__enable_refresh = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:105" *)
  reg \_ui__enable_refresh$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:105" *)
  reg _ui__refresh_in_progress = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:105" *)
  reg \_ui__refresh_in_progress$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:105" *)
  reg _ui__refresh_lapsed = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:105" *)
  reg \_ui__refresh_lapsed$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:105" *)
  reg _ui__request_to_refresh_soon = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:105" *)
  reg \_ui__request_to_refresh_soon$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:147" *)
  reg complete = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:147" *)
  reg \complete$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg [12:0] controller_pin_ui__ios__a = 13'h0000;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg [12:0] \controller_pin_ui__ios__a$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg [1:0] controller_pin_ui__ios__ba = 2'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg [1:0] \controller_pin_ui__ios__ba$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  wire [15:0] controller_pin_ui__ios__cipo_dq;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg controller_pin_ui__ios__clk_en = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg \controller_pin_ui__ios__clk_en$next ;
  (* enum_base_type = "sdram_cmds" *)
  (* enum_value_0000 = "CMD_DESL" *)
  (* enum_value_0001 = "CMD_NOP" *)
  (* enum_value_0010 = "CMD_BST" *)
  (* enum_value_0011 = "CMD_READ" *)
  (* enum_value_0100 = "CMD_READ_AP" *)
  (* enum_value_0101 = "CMD_WRITE" *)
  (* enum_value_0110 = "CMD_WRITE_AP" *)
  (* enum_value_0111 = "CMD_ACT" *)
  (* enum_value_1000 = "CMD_PRE" *)
  (* enum_value_1001 = "CMD_PALL" *)
  (* enum_value_1010 = "CMD_REF" *)
  (* enum_value_1011 = "CMD_SELF" *)
  (* enum_value_1100 = "CMD_MRS" *)
  (* enum_value_1101 = "CMD_ILLEGAL" *)
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg [3:0] controller_pin_ui__ios__cmd = 4'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg [3:0] \controller_pin_ui__ios__cmd$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg [15:0] controller_pin_ui__ios__copi_dq = 16'h0000;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg [15:0] \controller_pin_ui__ios__copi_dq$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg controller_pin_ui__ios__dqm = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:81" *)
  reg \controller_pin_ui__ios__dqm$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
  reg [2:0] controller_refresh_fsm_state = 3'h1;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
  reg [2:0] \controller_refresh_fsm_state$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
  reg [1:0] delay_fsm_state = 2'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
  reg [1:0] \delay_fsm_state$29  = 2'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
  reg [1:0] \delay_fsm_state$29$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
  reg [1:0] \delay_fsm_state$30  = 2'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
  reg [1:0] \delay_fsm_state$30$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
  reg [1:0] \delay_fsm_state$31  = 2'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
  reg [1:0] \delay_fsm_state$31$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
  reg [1:0] \delay_fsm_state$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:84" *)
  wire delayer_ui__done;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:101" *)
  reg \delayer_ui__done$1  = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:101" *)
  reg \delayer_ui__done$1$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:84" *)
  reg [23:0] delayer_ui__load = 24'h000000;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:101" *)
  reg [23:0] \delayer_ui__load$2  = 24'h000000;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:101" *)
  reg [23:0] \delayer_ui__load$2$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:84" *)
  reg [23:0] \delayer_ui__load$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
  reg [3:0] initialise_and_load_mode_register_fsm_state = 4'h1;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
  reg [3:0] \initialise_and_load_mode_register_fsm_state$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:128" *)
  reg [22:0] refresh_level = 23'h45d300;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:128" *)
  reg [22:0] \refresh_level$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:124" *)
  reg [13:0] refreshes_to_do = 14'h0000;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:124" *)
  reg [13:0] \refreshes_to_do$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:53" *)
  input sdram_clk;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:53" *)
  input sdram_rst;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:121" *)
  reg [1:0] shift_timer = 2'h3;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:121" *)
  reg [1:0] \shift_timer$26  = 2'h3;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:121" *)
  reg [1:0] \shift_timer$26$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:121" *)
  reg [1:0] \shift_timer$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  input ui__enable_refresh;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  output ui__refresh_in_progress;
  reg ui__refresh_in_progress = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  reg \ui__refresh_in_progress$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  output ui__refresh_lapsed;
  reg ui__refresh_lapsed = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  reg \ui__refresh_lapsed$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  output ui__request_to_refresh_soon;
  reg ui__request_to_refresh_soon = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  reg \ui__request_to_refresh_soon$next ;
  assign \$11  = refresh_level + (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:245" *) 10'h22e;
  assign \$14  = refresh_level < (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:244" *) 23'h45d0d2;
  assign \$13  = \$14  ? (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:243" *) \$11  : 24'h45d300;
  assign \$18  = 23'h45d300 - (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:138" *) refresh_level;
  assign \$20  = ! (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:141" *) controller_refresh_fsm_state;
  assign \$22  = ! (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:150" *) initialise_and_load_mode_register_fsm_state;
  assign \$24  = shift_timer == (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:125" *) 1'h1;
  assign \$27  = \shift_timer$26  == (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:125" *) 1'h1;
  assign \$32  = + (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/ast.py:254" *) shift_timer[1];
  assign \$34  = shift_timer == (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:123" *) 1'h1;
  assign \$36  = + (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/ast.py:254" *) \shift_timer$26 [1];
  assign \$38  = \shift_timer$26  == (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:123" *) 1'h1;
  assign \$40  = refreshes_to_do > (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:202" *) 1'h0;
  assign \$42  = refreshes_to_do == (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:213" *) 14'h2000;
  assign \$44  = refreshes_to_do > (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:231" *) 1'h0;
  assign \$46  = refreshes_to_do == (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:213" *) 14'h2000;
  assign \$48  = refreshes_to_do > (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:231" *) 1'h0;
  assign \$4  = refresh_level - (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:131" *) 1'h1;
  always @(posedge sdram_clk)
    \delayer_ui__done$1  <= \delayer_ui__done$1$next ;
  always @(posedge sdram_clk)
    delayer_ui__load <= \delayer_ui__load$next ;
  always @(posedge sdram_clk)
    ui__request_to_refresh_soon <= \ui__request_to_refresh_soon$next ;
  always @(posedge sdram_clk)
    _ui__enable_refresh <= \_ui__enable_refresh$next ;
  always @(posedge sdram_clk)
    ui__refresh_in_progress <= \ui__refresh_in_progress$next ;
  always @(posedge sdram_clk)
    ui__refresh_lapsed <= \ui__refresh_lapsed$next ;
  always @(posedge sdram_clk)
    controller_pin_ui__ios__cmd <= \controller_pin_ui__ios__cmd$next ;
  always @(posedge sdram_clk)
    controller_pin_ui__ios__clk_en <= \controller_pin_ui__ios__clk_en$next ;
  always @(posedge sdram_clk)
    controller_pin_ui__ios__dqm <= \controller_pin_ui__ios__dqm$next ;
  always @(posedge sdram_clk)
    controller_pin_ui__ios__copi_dq <= \controller_pin_ui__ios__copi_dq$next ;
  always @(posedge sdram_clk)
    _controller_pin_ui__ios__cipo_dq <= \_controller_pin_ui__ios__cipo_dq$next ;
  always @(posedge sdram_clk)
    controller_pin_ui__ios__a <= \controller_pin_ui__ios__a$next ;
  always @(posedge sdram_clk)
    controller_pin_ui__ios__ba <= \controller_pin_ui__ios__ba$next ;
  always @(posedge sdram_clk)
    _controller_pin_ui__ios__cmd <= \_controller_pin_ui__ios__cmd$next ;
  always @(posedge sdram_clk)
    _controller_pin_ui__ios__clk_en <= \_controller_pin_ui__ios__clk_en$next ;
  always @(posedge sdram_clk)
    refresh_level <= \refresh_level$next ;
  always @(posedge sdram_clk)
    refreshes_to_do <= \refreshes_to_do$next ;
  always @(posedge sdram_clk)
    _ui__refresh_lapsed <= \_ui__refresh_lapsed$next ;
  always @(posedge sdram_clk)
    complete <= \complete$next ;
  always @(posedge sdram_clk)
    initialise_and_load_mode_register_fsm_state <= \initialise_and_load_mode_register_fsm_state$next ;
  always @(posedge sdram_clk)
    \delayer_ui__load$2  <= \delayer_ui__load$2$next ;
  always @(posedge sdram_clk)
    delay_fsm_state <= \delay_fsm_state$next ;
  always @(posedge sdram_clk)
    shift_timer <= \shift_timer$next ;
  always @(posedge sdram_clk)
    \delay_fsm_state$29  <= \delay_fsm_state$29$next ;
  always @(posedge sdram_clk)
    \delay_fsm_state$30  <= \delay_fsm_state$30$next ;
  always @(posedge sdram_clk)
    _controller_pin_ui__ios__a <= \_controller_pin_ui__ios__a$next ;
  always @(posedge sdram_clk)
    \shift_timer$26  <= \shift_timer$26$next ;
  always @(posedge sdram_clk)
    controller_refresh_fsm_state <= \controller_refresh_fsm_state$next ;
  always @(posedge sdram_clk)
    _ui__request_to_refresh_soon <= \_ui__request_to_refresh_soon$next ;
  always @(posedge sdram_clk)
    _ui__refresh_in_progress <= \_ui__refresh_in_progress$next ;
  assign \$7  = refresh_level > (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:131" *) 1'h0;
  always @(posedge sdram_clk)
    \delay_fsm_state$31  <= \delay_fsm_state$31$next ;
  assign \$6  = \$7  ? (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:131" *) \$4  : 24'h000000;
  delayer delayer (
    .sdram_clk(sdram_clk),
    .sdram_rst(sdram_rst),
    .ui__done(delayer_ui__done),
    .ui__load(delayer_ui__load)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \delayer_ui__done$1$next  = delayer_ui__done;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \delayer_ui__done$1$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \delayer_ui__load$next  = \delayer_ui__load$2 ;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \delayer_ui__load$next  = 24'h000000;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \_controller_pin_ui__ios__cipo_dq$next  = 16'h0000;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_controller_pin_ui__ios__cipo_dq$next  = 16'h0000;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \controller_pin_ui__ios__a$next  = _controller_pin_ui__ios__a;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \controller_pin_ui__ios__a$next  = 13'h0000;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \controller_pin_ui__ios__ba$next  = 2'h0;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \controller_pin_ui__ios__ba$next  = 2'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \_controller_pin_ui__ios__cmd$next  = 4'h1;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
          casez (initialise_and_load_mode_register_fsm_state)
            /* \amaranth.decoding  = "POWERUP/1" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:152" */
            4'h1:
                /* empty */;
            /* \amaranth.decoding  = "POWERUP_WAITING/2" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:154" */
            4'h2:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS/3" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:158" */
            4'h3:
                \_controller_pin_ui__ios__cmd$next  = 4'h9;
            /* \amaranth.decoding  = "PRECH_BANKS_WAITING/4" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:161" */
            4'h4:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1/5" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:165" */
            4'h5:
                \_controller_pin_ui__ios__cmd$next  = 4'ha;
            /* \amaranth.decoding  = "AUTO_REFRESH_1_WAITING/6" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:168" */
            4'h6:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_2/7" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:172" */
            4'h7:
                \_controller_pin_ui__ios__cmd$next  = 4'ha;
            /* \amaranth.decoding  = "AUTO_REFRESH_2_WAITING/8" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:175" */
            4'h8:
                /* empty */;
            /* \amaranth.decoding  = "LOAD_MODE_REG/9" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:179" */
            4'h9:
                \_controller_pin_ui__ios__cmd$next  = 4'hc;
          endcase
      /* \amaranth.decoding  = "READY_FOR_NORMAL_OPERATION/3" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:199" */
      3'h3:
          /* empty */;
      /* \amaranth.decoding  = "REQUEST_REFRESH_SOON/2" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:206" */
      3'h2:
          /* empty */;
      /* \amaranth.decoding  = "ERROR_REFRESH_LAPSED/0" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:216" */
      3'h0:
          /* empty */;
      /* \amaranth.decoding  = "DO_ANOTHER_REFRESH?/4" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:229" */
      3'h4:
          /* empty */;
      /* \amaranth.decoding  = "AUTO_REFRESH/5" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:240" */
      3'h5:
          \_controller_pin_ui__ios__cmd$next  = 4'ha;
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_controller_pin_ui__ios__cmd$next  = 4'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \_controller_pin_ui__ios__clk_en$next  = 1'h1;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_controller_pin_ui__ios__clk_en$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \refresh_level$next  = \$6 [22:0];
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          /* empty */;
      /* \amaranth.decoding  = "READY_FOR_NORMAL_OPERATION/3" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:199" */
      3'h3:
          /* empty */;
      /* \amaranth.decoding  = "REQUEST_REFRESH_SOON/2" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:206" */
      3'h2:
          /* empty */;
      /* \amaranth.decoding  = "ERROR_REFRESH_LAPSED/0" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:216" */
      3'h0:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:222" *)
          casez (_ui__enable_refresh)
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:222" */
            1'h1:
                \refresh_level$next  = 23'h45d300;
          endcase
      /* \amaranth.decoding  = "DO_ANOTHER_REFRESH?/4" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:229" */
      3'h4:
          /* empty */;
      /* \amaranth.decoding  = "AUTO_REFRESH/5" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:240" */
      3'h5:
          \refresh_level$next  = \$13 [22:0];
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \refresh_level$next  = 23'h45d300;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \refreshes_to_do$next  = \$18 [23:10];
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \refreshes_to_do$next  = 14'h0000;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \_ui__refresh_lapsed$next  = \$20 ;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__refresh_lapsed$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \complete$next  = complete;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          \complete$next  = \$22 ;
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \complete$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \initialise_and_load_mode_register_fsm_state$next  = initialise_and_load_mode_register_fsm_state;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
          casez (initialise_and_load_mode_register_fsm_state)
            /* \amaranth.decoding  = "POWERUP/1" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:152" */
            4'h1:
                \initialise_and_load_mode_register_fsm_state$next  = 4'h2;
            /* \amaranth.decoding  = "POWERUP_WAITING/2" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:154" */
            4'h2:
                (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:155" *)
                casez (\delayer_ui__done$1 )
                  /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:155" */
                  1'h1:
                      \initialise_and_load_mode_register_fsm_state$next  = 4'h3;
                endcase
            /* \amaranth.decoding  = "PRECH_BANKS/3" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:158" */
            4'h3:
                \initialise_and_load_mode_register_fsm_state$next  = 4'h4;
            /* \amaranth.decoding  = "PRECH_BANKS_WAITING/4" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:161" */
            4'h4:
                (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:162" *)
                casez (\$24 )
                  /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:162" */
                  1'h1:
                      \initialise_and_load_mode_register_fsm_state$next  = 4'h5;
                endcase
            /* \amaranth.decoding  = "AUTO_REFRESH_1/5" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:165" */
            4'h5:
                \initialise_and_load_mode_register_fsm_state$next  = 4'h6;
            /* \amaranth.decoding  = "AUTO_REFRESH_1_WAITING/6" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:168" */
            4'h6:
                (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:169" *)
                casez (\delayer_ui__done$1 )
                  /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:169" */
                  1'h1:
                      \initialise_and_load_mode_register_fsm_state$next  = 4'h7;
                endcase
            /* \amaranth.decoding  = "AUTO_REFRESH_2/7" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:172" */
            4'h7:
                \initialise_and_load_mode_register_fsm_state$next  = 4'h8;
            /* \amaranth.decoding  = "AUTO_REFRESH_2_WAITING/8" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:175" */
            4'h8:
                (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:176" *)
                casez (\delayer_ui__done$1 )
                  /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:176" */
                  1'h1:
                      \initialise_and_load_mode_register_fsm_state$next  = 4'h9;
                endcase
            /* \amaranth.decoding  = "LOAD_MODE_REG/9" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:179" */
            4'h9:
                \initialise_and_load_mode_register_fsm_state$next  = 4'ha;
            /* \amaranth.decoding  = "LOAD_MODE_REG_WAITING/10" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:187" */
            4'ha:
                (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:188" *)
                casez (\$27 )
                  /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:188" */
                  1'h1:
                      \initialise_and_load_mode_register_fsm_state$next  = 4'h0;
                endcase
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \initialise_and_load_mode_register_fsm_state$next  = 4'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \ui__request_to_refresh_soon$next  = _ui__request_to_refresh_soon;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \ui__request_to_refresh_soon$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \delayer_ui__load$2$next  = \delayer_ui__load$2 ;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
          casez (initialise_and_load_mode_register_fsm_state)
            /* \amaranth.decoding  = "POWERUP/1" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:152" */
            4'h1:
                /* empty */;
            /* \amaranth.decoding  = "POWERUP_WAITING/2" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:154" */
            4'h2:
                (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
                casez (delay_fsm_state)
                  /* \amaranth.decoding  = "IDLE/0" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:129" */
                  2'h0:
                      \delayer_ui__load$2$next  = 24'h0037d4;
                  /* \amaranth.decoding  = "LOADED/1" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:132" */
                  2'h1:
                      \delayer_ui__load$2$next  = 24'h000000;
                endcase
            /* \amaranth.decoding  = "PRECH_BANKS/3" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:158" */
            4'h3:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS_WAITING/4" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:161" */
            4'h4:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1/5" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:165" */
            4'h5:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1_WAITING/6" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:168" */
            4'h6:
                (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
                casez (\delay_fsm_state$29 )
                  /* \amaranth.decoding  = "IDLE/0" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:129" */
                  2'h0:
                      \delayer_ui__load$2$next  = 24'h000001;
                  /* \amaranth.decoding  = "LOADED/1" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:132" */
                  2'h1:
                      \delayer_ui__load$2$next  = 24'h000000;
                endcase
            /* \amaranth.decoding  = "AUTO_REFRESH_2/7" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:172" */
            4'h7:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_2_WAITING/8" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:175" */
            4'h8:
                (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
                casez (\delay_fsm_state$30 )
                  /* \amaranth.decoding  = "IDLE/0" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:129" */
                  2'h0:
                      \delayer_ui__load$2$next  = 24'h000001;
                  /* \amaranth.decoding  = "LOADED/1" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:132" */
                  2'h1:
                      \delayer_ui__load$2$next  = 24'h000000;
                endcase
          endcase
      /* \amaranth.decoding  = "READY_FOR_NORMAL_OPERATION/3" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:199" */
      3'h3:
          /* empty */;
      /* \amaranth.decoding  = "REQUEST_REFRESH_SOON/2" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:206" */
      3'h2:
          /* empty */;
      /* \amaranth.decoding  = "ERROR_REFRESH_LAPSED/0" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:216" */
      3'h0:
          /* empty */;
      /* \amaranth.decoding  = "DO_ANOTHER_REFRESH?/4" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:229" */
      3'h4:
          /* empty */;
      /* \amaranth.decoding  = "AUTO_REFRESH/5" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:240" */
      3'h5:
          /* empty */;
      /* \amaranth.decoding  = "AUTO_REFRESH_WAITING/6" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:250" */
      3'h6:
          (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
          casez (\delay_fsm_state$31 )
            /* \amaranth.decoding  = "IDLE/0" */
            /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:129" */
            2'h0:
                \delayer_ui__load$2$next  = 24'h000001;
            /* \amaranth.decoding  = "LOADED/1" */
            /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:132" */
            2'h1:
                \delayer_ui__load$2$next  = 24'h000000;
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \delayer_ui__load$2$next  = 24'h000000;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \delay_fsm_state$next  = delay_fsm_state;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
          casez (initialise_and_load_mode_register_fsm_state)
            /* \amaranth.decoding  = "POWERUP/1" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:152" */
            4'h1:
                /* empty */;
            /* \amaranth.decoding  = "POWERUP_WAITING/2" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:154" */
            4'h2:
                (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
                casez (delay_fsm_state)
                  /* \amaranth.decoding  = "IDLE/0" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:129" */
                  2'h0:
                      \delay_fsm_state$next  = 2'h1;
                  /* \amaranth.decoding  = "LOADED/1" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:132" */
                  2'h1:
                      \delay_fsm_state$next  = 2'h2;
                  /* \amaranth.decoding  = "DONE/2" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:135" */
                  2'h2:
                      (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:136" *)
                      casez (\delayer_ui__done$1 )
                        /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:136" */
                        1'h1:
                            \delay_fsm_state$next  = 2'h0;
                      endcase
                endcase
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \delay_fsm_state$next  = 2'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \shift_timer$next  = shift_timer;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
          casez (initialise_and_load_mode_register_fsm_state)
            /* \amaranth.decoding  = "POWERUP/1" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:152" */
            4'h1:
                /* empty */;
            /* \amaranth.decoding  = "POWERUP_WAITING/2" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:154" */
            4'h2:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS/3" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:158" */
            4'h3:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS_WAITING/4" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:161" */
            4'h4:
              begin
                \shift_timer$next  = \$32 ;
                (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:123" *)
                casez (\$34 )
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:123" */
                  1'h1:
                      \shift_timer$next  = 2'h3;
                endcase
              end
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \shift_timer$next  = 2'h3;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \delay_fsm_state$29$next  = \delay_fsm_state$29 ;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
          casez (initialise_and_load_mode_register_fsm_state)
            /* \amaranth.decoding  = "POWERUP/1" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:152" */
            4'h1:
                /* empty */;
            /* \amaranth.decoding  = "POWERUP_WAITING/2" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:154" */
            4'h2:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS/3" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:158" */
            4'h3:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS_WAITING/4" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:161" */
            4'h4:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1/5" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:165" */
            4'h5:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1_WAITING/6" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:168" */
            4'h6:
                (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
                casez (\delay_fsm_state$29 )
                  /* \amaranth.decoding  = "IDLE/0" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:129" */
                  2'h0:
                      \delay_fsm_state$29$next  = 2'h1;
                  /* \amaranth.decoding  = "LOADED/1" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:132" */
                  2'h1:
                      \delay_fsm_state$29$next  = 2'h2;
                  /* \amaranth.decoding  = "DONE/2" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:135" */
                  2'h2:
                      (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:136" *)
                      casez (\delayer_ui__done$1 )
                        /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:136" */
                        1'h1:
                            \delay_fsm_state$29$next  = 2'h0;
                      endcase
                endcase
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \delay_fsm_state$29$next  = 2'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \delay_fsm_state$30$next  = \delay_fsm_state$30 ;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
          casez (initialise_and_load_mode_register_fsm_state)
            /* \amaranth.decoding  = "POWERUP/1" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:152" */
            4'h1:
                /* empty */;
            /* \amaranth.decoding  = "POWERUP_WAITING/2" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:154" */
            4'h2:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS/3" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:158" */
            4'h3:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS_WAITING/4" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:161" */
            4'h4:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1/5" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:165" */
            4'h5:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1_WAITING/6" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:168" */
            4'h6:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_2/7" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:172" */
            4'h7:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_2_WAITING/8" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:175" */
            4'h8:
                (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
                casez (\delay_fsm_state$30 )
                  /* \amaranth.decoding  = "IDLE/0" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:129" */
                  2'h0:
                      \delay_fsm_state$30$next  = 2'h1;
                  /* \amaranth.decoding  = "LOADED/1" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:132" */
                  2'h1:
                      \delay_fsm_state$30$next  = 2'h2;
                  /* \amaranth.decoding  = "DONE/2" */
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:135" */
                  2'h2:
                      (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:136" *)
                      casez (\delayer_ui__done$1 )
                        /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:136" */
                        1'h1:
                            \delay_fsm_state$30$next  = 2'h0;
                      endcase
                endcase
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \delay_fsm_state$30$next  = 2'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \_controller_pin_ui__ios__a$next  = _controller_pin_ui__ios__a;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
          casez (initialise_and_load_mode_register_fsm_state)
            /* \amaranth.decoding  = "POWERUP/1" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:152" */
            4'h1:
                /* empty */;
            /* \amaranth.decoding  = "POWERUP_WAITING/2" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:154" */
            4'h2:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS/3" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:158" */
            4'h3:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS_WAITING/4" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:161" */
            4'h4:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1/5" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:165" */
            4'h5:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1_WAITING/6" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:168" */
            4'h6:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_2/7" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:172" */
            4'h7:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_2_WAITING/8" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:175" */
            4'h8:
                /* empty */;
            /* \amaranth.decoding  = "LOAD_MODE_REG/9" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:179" */
            4'h9:
                \_controller_pin_ui__ios__a$next [9:0] = 10'h033;
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_controller_pin_ui__ios__a$next  = 13'h0000;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \shift_timer$26$next  = \shift_timer$26 ;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:148" *)
          casez (initialise_and_load_mode_register_fsm_state)
            /* \amaranth.decoding  = "POWERUP/1" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:152" */
            4'h1:
                /* empty */;
            /* \amaranth.decoding  = "POWERUP_WAITING/2" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:154" */
            4'h2:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS/3" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:158" */
            4'h3:
                /* empty */;
            /* \amaranth.decoding  = "PRECH_BANKS_WAITING/4" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:161" */
            4'h4:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1/5" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:165" */
            4'h5:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_1_WAITING/6" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:168" */
            4'h6:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_2/7" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:172" */
            4'h7:
                /* empty */;
            /* \amaranth.decoding  = "AUTO_REFRESH_2_WAITING/8" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:175" */
            4'h8:
                /* empty */;
            /* \amaranth.decoding  = "LOAD_MODE_REG/9" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:179" */
            4'h9:
                /* empty */;
            /* \amaranth.decoding  = "LOAD_MODE_REG_WAITING/10" */
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:187" */
            4'ha:
              begin
                \shift_timer$26$next  = \$36 ;
                (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:123" *)
                casez (\$38 )
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:123" */
                  1'h1:
                      \shift_timer$26$next  = 2'h3;
                endcase
              end
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \shift_timer$26$next  = 2'h3;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \controller_refresh_fsm_state$next  = controller_refresh_fsm_state;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:196" *)
          casez (complete)
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:196" */
            1'h1:
                \controller_refresh_fsm_state$next  = 3'h2;
          endcase
      /* \amaranth.decoding  = "READY_FOR_NORMAL_OPERATION/3" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:199" */
      3'h3:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:202" *)
          casez (\$40 )
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:202" */
            1'h1:
                \controller_refresh_fsm_state$next  = 3'h2;
          endcase
      /* \amaranth.decoding  = "REQUEST_REFRESH_SOON/2" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:206" */
      3'h2:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:208" *)
          casez ({ \$42 , _ui__enable_refresh })
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:208" */
            2'b?1:
                \controller_refresh_fsm_state$next  = 3'h4;
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:213" */
            2'b1?:
                \controller_refresh_fsm_state$next  = 3'h0;
          endcase
      /* \amaranth.decoding  = "ERROR_REFRESH_LAPSED/0" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:216" */
      3'h0:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:222" *)
          casez (_ui__enable_refresh)
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:222" */
            1'h1:
                \controller_refresh_fsm_state$next  = 3'h4;
          endcase
      /* \amaranth.decoding  = "DO_ANOTHER_REFRESH?/4" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:229" */
      3'h4:
          (* full_case = 32'd1 *)
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:231" *)
          casez (\$44 )
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:231" */
            1'h1:
                \controller_refresh_fsm_state$next  = 3'h5;
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:235" */
            default:
                \controller_refresh_fsm_state$next  = 3'h3;
          endcase
      /* \amaranth.decoding  = "AUTO_REFRESH/5" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:240" */
      3'h5:
          \controller_refresh_fsm_state$next  = 3'h6;
      /* \amaranth.decoding  = "AUTO_REFRESH_WAITING/6" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:250" */
      3'h6:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:251" *)
          casez (\delayer_ui__done$1 )
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:251" */
            1'h1:
                \controller_refresh_fsm_state$next  = 3'h4;
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \controller_refresh_fsm_state$next  = 3'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \_ui__request_to_refresh_soon$next  = _ui__request_to_refresh_soon;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          /* empty */;
      /* \amaranth.decoding  = "READY_FOR_NORMAL_OPERATION/3" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:199" */
      3'h3:
          /* empty */;
      /* \amaranth.decoding  = "REQUEST_REFRESH_SOON/2" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:206" */
      3'h2:
          \_ui__request_to_refresh_soon$next  = 1'h1;
      /* \amaranth.decoding  = "ERROR_REFRESH_LAPSED/0" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:216" */
      3'h0:
          \_ui__request_to_refresh_soon$next  = 1'h1;
      /* \amaranth.decoding  = "DO_ANOTHER_REFRESH?/4" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:229" */
      3'h4:
          \_ui__request_to_refresh_soon$next  = 1'h0;
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__request_to_refresh_soon$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \_ui__refresh_in_progress$next  = _ui__refresh_in_progress;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          /* empty */;
      /* \amaranth.decoding  = "READY_FOR_NORMAL_OPERATION/3" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:199" */
      3'h3:
          /* empty */;
      /* \amaranth.decoding  = "REQUEST_REFRESH_SOON/2" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:206" */
      3'h2:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:208" *)
          casez ({ \$46 , _ui__enable_refresh })
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:208" */
            2'b?1:
                \_ui__refresh_in_progress$next  = 1'h1;
          endcase
      /* \amaranth.decoding  = "ERROR_REFRESH_LAPSED/0" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:216" */
      3'h0:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:222" *)
          casez (_ui__enable_refresh)
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:222" */
            1'h1:
                \_ui__refresh_in_progress$next  = 1'h1;
          endcase
      /* \amaranth.decoding  = "DO_ANOTHER_REFRESH?/4" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:229" */
      3'h4:
          (* full_case = 32'd1 *)
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:231" *)
          casez (\$48 )
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:231" */
            1'h1:
                /* empty */;
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:235" */
            default:
                \_ui__refresh_in_progress$next  = 1'h0;
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__refresh_in_progress$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \_ui__enable_refresh$next  = ui__enable_refresh;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__enable_refresh$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \delay_fsm_state$31$next  = \delay_fsm_state$31 ;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:121" *)
    casez (controller_refresh_fsm_state)
      /* \amaranth.decoding  = "AFTER_RESET/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:144" */
      3'h1:
          /* empty */;
      /* \amaranth.decoding  = "READY_FOR_NORMAL_OPERATION/3" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:199" */
      3'h3:
          /* empty */;
      /* \amaranth.decoding  = "REQUEST_REFRESH_SOON/2" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:206" */
      3'h2:
          /* empty */;
      /* \amaranth.decoding  = "ERROR_REFRESH_LAPSED/0" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:216" */
      3'h0:
          /* empty */;
      /* \amaranth.decoding  = "DO_ANOTHER_REFRESH?/4" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:229" */
      3'h4:
          /* empty */;
      /* \amaranth.decoding  = "AUTO_REFRESH/5" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:240" */
      3'h5:
          /* empty */;
      /* \amaranth.decoding  = "AUTO_REFRESH_WAITING/6" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:250" */
      3'h6:
          (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:128" *)
          casez (\delay_fsm_state$31 )
            /* \amaranth.decoding  = "IDLE/0" */
            /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:129" */
            2'h0:
                \delay_fsm_state$31$next  = 2'h1;
            /* \amaranth.decoding  = "LOADED/1" */
            /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:132" */
            2'h1:
                \delay_fsm_state$31$next  = 2'h2;
            /* \amaranth.decoding  = "DONE/2" */
            /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:135" */
            2'h2:
                (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:136" *)
                casez (\delayer_ui__done$1 )
                  /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amaram/amaram/sdram_n_fifo_interface/Delayer.py:136" */
                  1'h1:
                      \delay_fsm_state$31$next  = 2'h0;
                endcase
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \delay_fsm_state$31$next  = 2'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \ui__refresh_in_progress$next  = _ui__refresh_in_progress;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \ui__refresh_in_progress$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \ui__refresh_lapsed$next  = _ui__refresh_lapsed;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \ui__refresh_lapsed$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \controller_pin_ui__ios__cmd$next  = _controller_pin_ui__ios__cmd;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \controller_pin_ui__ios__cmd$next  = 4'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \controller_pin_ui__ios__clk_en$next  = _controller_pin_ui__ios__clk_en;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \controller_pin_ui__ios__clk_en$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \controller_pin_ui__ios__dqm$next  = 1'h0;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \controller_pin_ui__ios__dqm$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$2 ) begin end
    \controller_pin_ui__ios__copi_dq$next  = 16'h0000;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \controller_pin_ui__ios__copi_dq$next  = 16'h0000;
    endcase
  end
  assign \$3  = \$6 ;
  assign \$10  = \$13 ;
  assign \$17  = \$18 ;
  assign _controller_pin_ui__ios__dqm = 1'h0;
  assign _controller_pin_ui__ios__copi_dq = 16'h0000;
  assign controller_pin_ui__ios__cipo_dq = 16'h0000;
  assign _controller_pin_ui__ios__ba = 2'h0;
endmodule

(* \amaranth.hierarchy  = "top.tb" *)
(* generator = "Amaranth" *)
module tb(ui__tb_fanin_flags__in_requesting_refresh, ui__tb_fanin_flags__in_performing_refresh, ui__tb_fanout_flags__trigger, ui__request_to_refresh_soon, ui__enable_refresh, ui__refresh_in_progress, ui__refresh_lapsed, sdram_clk, ui__tb_fanin_flags__in_normal_operation);
  reg \$auto$verilog_backend.cc:2083:dump_module$3  = 0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:354" *)
  wire \$11 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:369" *)
  wire \$13 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:356" *)
  wire \$3 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:352" *)
  wire \$7 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:353" *)
  wire \$9 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  reg _ui__enable_refresh = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  reg \_ui__enable_refresh$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  wire _ui__refresh_in_progress;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  wire _ui__refresh_lapsed;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  wire _ui__request_to_refresh_soon;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  reg _ui__tb_fanin_flags__in_normal_operation = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  reg \_ui__tb_fanin_flags__in_normal_operation$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  reg _ui__tb_fanin_flags__in_performing_refresh = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  reg \_ui__tb_fanin_flags__in_performing_refresh$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  reg _ui__tb_fanin_flags__in_requesting_refresh = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  reg \_ui__tb_fanin_flags__in_requesting_refresh$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  reg _ui__tb_fanout_flags__trigger = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:336" *)
  reg \_ui__tb_fanout_flags__trigger$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:350" *)
  reg [1:0] fsm_state = 2'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:350" *)
  reg [1:0] \fsm_state$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  reg refresher_ui__enable_refresh = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:333" *)
  wire \refresher_ui__enable_refresh$2 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  reg \refresher_ui__enable_refresh$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  wire refresher_ui__refresh_in_progress;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:333" *)
  reg \refresher_ui__refresh_in_progress$5  = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:333" *)
  reg \refresher_ui__refresh_in_progress$5$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  wire refresher_ui__refresh_lapsed;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:333" *)
  reg \refresher_ui__refresh_lapsed$6  = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:333" *)
  reg \refresher_ui__refresh_lapsed$6$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:82" *)
  wire refresher_ui__request_to_refresh_soon;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:333" *)
  reg \refresher_ui__request_to_refresh_soon$1  = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:333" *)
  reg \refresher_ui__request_to_refresh_soon$1$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:53" *)
  input sdram_clk;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:53" *)
  wire sdram_rst;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  input ui__enable_refresh;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  output ui__refresh_in_progress;
  reg ui__refresh_in_progress = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  reg \ui__refresh_in_progress$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  output ui__refresh_lapsed;
  reg ui__refresh_lapsed = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  reg \ui__refresh_lapsed$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  output ui__request_to_refresh_soon;
  reg ui__request_to_refresh_soon = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  reg \ui__request_to_refresh_soon$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  output ui__tb_fanin_flags__in_normal_operation;
  reg ui__tb_fanin_flags__in_normal_operation = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  reg \ui__tb_fanin_flags__in_normal_operation$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  output ui__tb_fanin_flags__in_performing_refresh;
  reg ui__tb_fanin_flags__in_performing_refresh = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  reg \ui__tb_fanin_flags__in_performing_refresh$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  output ui__tb_fanin_flags__in_requesting_refresh;
  reg ui__tb_fanin_flags__in_requesting_refresh = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  reg \ui__tb_fanin_flags__in_requesting_refresh$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  input ui__tb_fanout_flags__trigger;
  assign \$9  = fsm_state == (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:353" *) 1'h1;
  assign \$11  = fsm_state == (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:354" *) 2'h2;
  assign \$13  = ~ (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:369" *) refresher_ui__request_to_refresh_soon;
  always @(posedge sdram_clk)
    \refresher_ui__request_to_refresh_soon$1  <= \refresher_ui__request_to_refresh_soon$1$next ;
  always @(posedge sdram_clk)
    refresher_ui__enable_refresh <= \refresher_ui__enable_refresh$next ;
  always @(posedge sdram_clk)
    \refresher_ui__refresh_in_progress$5  <= \refresher_ui__refresh_in_progress$5$next ;
  always @(posedge sdram_clk)
    \refresher_ui__refresh_lapsed$6  <= \refresher_ui__refresh_lapsed$6$next ;
  always @(posedge sdram_clk)
    ui__tb_fanin_flags__in_normal_operation <= \ui__tb_fanin_flags__in_normal_operation$next ;
  always @(posedge sdram_clk)
    ui__tb_fanin_flags__in_requesting_refresh <= \ui__tb_fanin_flags__in_requesting_refresh$next ;
  always @(posedge sdram_clk)
    ui__tb_fanin_flags__in_performing_refresh <= \ui__tb_fanin_flags__in_performing_refresh$next ;
  always @(posedge sdram_clk)
    _ui__tb_fanout_flags__trigger <= \_ui__tb_fanout_flags__trigger$next ;
  always @(posedge sdram_clk)
    ui__request_to_refresh_soon <= \ui__request_to_refresh_soon$next ;
  always @(posedge sdram_clk)
    _ui__enable_refresh <= \_ui__enable_refresh$next ;
  always @(posedge sdram_clk)
    ui__refresh_in_progress <= \ui__refresh_in_progress$next ;
  always @(posedge sdram_clk)
    ui__refresh_lapsed <= \ui__refresh_lapsed$next ;
  always @(posedge sdram_clk)
    _ui__tb_fanin_flags__in_normal_operation <= \_ui__tb_fanin_flags__in_normal_operation$next ;
  always @(posedge sdram_clk)
    _ui__tb_fanin_flags__in_requesting_refresh <= \_ui__tb_fanin_flags__in_requesting_refresh$next ;
  always @(posedge sdram_clk)
    _ui__tb_fanin_flags__in_performing_refresh <= \_ui__tb_fanin_flags__in_performing_refresh$next ;
  always @(posedge sdram_clk)
    fsm_state <= \fsm_state$next ;
  assign \$3  = fsm_state == (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:356" *) 2'h2;
  assign \$7  = ! (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:352" *) fsm_state;
  refresher refresher (
    .sdram_clk(sdram_clk),
    .sdram_rst(1'h0),
    .ui__enable_refresh(refresher_ui__enable_refresh),
    .ui__refresh_in_progress(refresher_ui__refresh_in_progress),
    .ui__refresh_lapsed(refresher_ui__refresh_lapsed),
    .ui__request_to_refresh_soon(refresher_ui__request_to_refresh_soon)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \refresher_ui__request_to_refresh_soon$1$next  = refresher_ui__request_to_refresh_soon;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \refresher_ui__request_to_refresh_soon$1$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \refresher_ui__enable_refresh$next  = \$3 ;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \refresher_ui__enable_refresh$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \ui__refresh_in_progress$next  = 1'h0;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \ui__refresh_in_progress$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \ui__refresh_lapsed$next  = 1'h0;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \ui__refresh_lapsed$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \_ui__tb_fanin_flags__in_normal_operation$next  = \$7 ;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__tb_fanin_flags__in_normal_operation$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \_ui__tb_fanin_flags__in_requesting_refresh$next  = \$9 ;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__tb_fanin_flags__in_requesting_refresh$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \_ui__tb_fanin_flags__in_performing_refresh$next  = \$11 ;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__tb_fanin_flags__in_performing_refresh$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \fsm_state$next  = fsm_state;
    (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:350" *)
    casez (fsm_state)
      /* \amaranth.decoding  = "NORMAL_OPERATION/0" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:359" */
      2'h0:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:361" *)
          casez (refresher_ui__request_to_refresh_soon)
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:361" */
            1'h1:
                \fsm_state$next  = 2'h1;
          endcase
      /* \amaranth.decoding  = "REQUESTING_REFRESH/1" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:364" */
      2'h1:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:365" *)
          casez (_ui__tb_fanout_flags__trigger)
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:365" */
            1'h1:
                \fsm_state$next  = 2'h2;
          endcase
      /* \amaranth.decoding  = "PERFORMING_REFRESH/2" */
      /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:368" */
      2'h2:
          (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:369" *)
          casez (\$13 )
            /* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:369" */
            1'h1:
                \fsm_state$next  = 2'h0;
          endcase
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \fsm_state$next  = 2'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \refresher_ui__refresh_in_progress$5$next  = refresher_ui__refresh_in_progress;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \refresher_ui__refresh_in_progress$5$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \refresher_ui__refresh_lapsed$6$next  = refresher_ui__refresh_lapsed;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \refresher_ui__refresh_lapsed$6$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \ui__tb_fanin_flags__in_normal_operation$next  = _ui__tb_fanin_flags__in_normal_operation;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \ui__tb_fanin_flags__in_normal_operation$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \ui__tb_fanin_flags__in_requesting_refresh$next  = _ui__tb_fanin_flags__in_requesting_refresh;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \ui__tb_fanin_flags__in_requesting_refresh$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \ui__tb_fanin_flags__in_performing_refresh$next  = _ui__tb_fanin_flags__in_performing_refresh;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \ui__tb_fanin_flags__in_performing_refresh$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \_ui__tb_fanout_flags__trigger$next  = ui__tb_fanout_flags__trigger;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__tb_fanout_flags__trigger$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \ui__request_to_refresh_soon$next  = 1'h0;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \ui__request_to_refresh_soon$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$3 ) begin end
    \_ui__enable_refresh$next  = ui__enable_refresh;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sdram_rst)
      1'h1:
          \_ui__enable_refresh$next  = 1'h0;
    endcase
  end
  assign sdram_rst = 1'h0;
  assign \refresher_ui__enable_refresh$2  = 1'h0;
  assign _ui__request_to_refresh_soon = 1'h0;
  assign _ui__refresh_in_progress = 1'h0;
  assign _ui__refresh_lapsed = 1'h0;
endmodule

(* \amaranth.hierarchy  = "top" *)
(* top =  1  *)
(* generator = "Amaranth" *)
module top(led_0__io, led_1__io, led_2__io, led_3__io, led_4__io, led_5__io, led_6__io, led_7__io, esp32_spi_0__en__io, esp32_spi_0__tx__io, esp32_spi_0__rx__io, esp32_spi_0__gpio4_copi__io, esp32_spi_0__gpio5_cs__io, esp32_spi_0__gpio12_cipo__io, esp32_spi_0__gpio16_sclk__io, uart_0__rx__io, uart_0__tx__io, uart_0__rts__io, uart_0__dtr__io, clk25_0__io, button_pwr_0__io
, button_fire_0__io, button_fire_1__io, button_up_0__io, button_down_0__io, button_left_0__io, button_right_0__io, esp32_spi_0__gpio0__io);
  reg \$auto$verilog_backend.cc:2083:dump_module$4  = 0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:36" *)
  wire [4:0] \$1 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:37" *)
  wire \$10 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:37" *)
  wire \$11 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" *)
  wire \$14 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" *)
  wire \$16 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" *)
  wire \$18 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:36" *)
  wire [4:0] \$2 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$20 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$22 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:125" *)
  wire \$24 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$26 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$28 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:128" *)
  wire \$30 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$32 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$34 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:131" *)
  wire \$36 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:123" *)
  wire \$38 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:36" *)
  wire [4:0] \$4 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:123" *)
  wire \$40 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:126" *)
  wire \$42 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:126" *)
  wire \$44 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:129" *)
  wire \$46 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:129" *)
  wire \$48 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:36" *)
  wire \$5 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:132" *)
  wire \$50 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:132" *)
  wire \$52 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" *)
  wire \$54 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" *)
  wire \$56 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" *)
  wire \$58 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$60 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$62 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:125" *)
  wire \$64 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$66 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$68 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:128" *)
  wire \$70 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$72 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *)
  wire \$74 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:131" *)
  wire \$76 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/ast.py:1369" *)
  wire \$78 ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:37" *)
  wire \$8 ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/ast.py:1369" *)
  wire \$80 ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:544" *)
  wire [7:0] \$82 ;
  (* \amaranth.sample_reg  = 32'd1 *)
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:535" *)
  reg \$sample$s$start$sync$1  = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:535" *)
  wire \$sample$s$start$sync$1$next ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_down_0__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_fire_0__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_fire_1__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_left_0__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_pwr_0__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_right_0__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input button_up_0__io;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:52" *)
  wire clk;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input clk25_0__io;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:34" *)
  reg [3:0] clk_counter = 4'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:34" *)
  reg [3:0] \clk_counter$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:53" *)
  wire ecp5pll_sdram_clk;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output esp32_spi_0__en__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  inout esp32_spi_0__gpio0__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output esp32_spi_0__gpio12_cipo__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input esp32_spi_0__gpio16_sclk__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input esp32_spi_0__gpio4_copi__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input esp32_spi_0__gpio5_cs__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input esp32_spi_0__rx__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output esp32_spi_0__tx__io;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:94" *)
  wire i_button_ffsync_i_buttons__left;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:94" *)
  wire i_button_ffsync_i_buttons__pwr;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:94" *)
  wire i_button_ffsync_i_buttons__right;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg i_button_ffsync_i_unsync_buttons__down = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg \i_button_ffsync_i_unsync_buttons__down$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg i_button_ffsync_i_unsync_buttons__fireA = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg \i_button_ffsync_i_unsync_buttons__fireA$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg i_button_ffsync_i_unsync_buttons__fireB = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg \i_button_ffsync_i_unsync_buttons__fireB$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg i_button_ffsync_i_unsync_buttons__left = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg \i_button_ffsync_i_unsync_buttons__left$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg i_button_ffsync_i_unsync_buttons__pwr = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg \i_button_ffsync_i_unsync_buttons__pwr$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg i_button_ffsync_i_unsync_buttons__right = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg \i_button_ffsync_i_unsync_buttons__right$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg i_button_ffsync_i_unsync_buttons__up = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:67" *)
  reg \i_button_ffsync_i_unsync_buttons__up$next ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_0__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_1__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_2__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_3__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_4__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_5__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_6__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output led_7__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_button_down_0_button_down_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_button_fire_0_button_fire_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_button_fire_1_button_fire_1__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_button_left_0_button_left_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_button_pwr_0_button_pwr_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_button_right_0_button_right_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_button_up_0_button_up_0__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  reg pin_esp32_spi_0__en_esp32_spi_0__en__o = 1'h0;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  reg \pin_esp32_spi_0__en_esp32_spi_0__en__o$next ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  reg pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o = 1'h0;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  reg \pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o$next ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_esp32_spi_0__rx_esp32_spi_0__rx__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  reg pin_esp32_spi_0__tx_esp32_spi_0__tx__o = 1'h0;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  reg \pin_esp32_spi_0__tx_esp32_spi_0__tx__o$next ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_led_0_led_0__o;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_led_1_led_1__o;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_led_2_led_2__o;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_led_3_led_3__o;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_led_4_led_4__o;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_led_5_led_5__o;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_led_6_led_6__o;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_led_7_led_7__o;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_uart_0__dtr_uart_0__dtr__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_uart_0__rts_uart_0__rts__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  wire pin_uart_0__rx_uart_0__rx__i;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  reg pin_uart_0__tx_uart_0__tx__o = 1'h0;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:143" *)
  reg \pin_uart_0__tx_uart_0__tx__o$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:52" *)
  reg rst = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:52" *)
  reg \rst$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:535" *)
  reg start = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:535" *)
  reg \start$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:30" *)
  reg sync_1e6_clk = 1'h0;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:30" *)
  reg \sync_1e6_clk$next ;
  (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:30" *)
  wire sync_1e6_rst;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  reg tb_ui__enable_refresh = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  reg \tb_ui__enable_refresh$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  wire tb_ui__refresh_in_progress;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  wire tb_ui__refresh_lapsed;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  wire tb_ui__request_to_refresh_soon;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  wire tb_ui__tb_fanin_flags__in_normal_operation;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  wire tb_ui__tb_fanin_flags__in_performing_refresh;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  wire tb_ui__tb_fanin_flags__in_requesting_refresh;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  reg tb_ui__tb_fanout_flags__trigger = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:323" *)
  reg \tb_ui__tb_fanout_flags__trigger$next ;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input uart_0__dtr__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input uart_0__rts__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  input uart_0__rx__io;
  (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/build/res.py:129" *)
  output uart_0__tx__io;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  wire ui__enable_refresh;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg ui__refresh_in_progress = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg \ui__refresh_in_progress$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg ui__refresh_lapsed = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg \ui__refresh_lapsed$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg ui__request_to_refresh_soon = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg \ui__request_to_refresh_soon$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg ui__tb_fanin_flags__in_normal_operation = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg \ui__tb_fanin_flags__in_normal_operation$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg ui__tb_fanin_flags__in_performing_refresh = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg \ui__tb_fanin_flags__in_performing_refresh$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg ui__tb_fanin_flags__in_requesting_refresh = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg \ui__tb_fanin_flags__in_requesting_refresh$next ;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg ui__tb_fanout_flags__trigger = 1'h0;
  (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:528" *)
  reg \ui__tb_fanout_flags__trigger$next ;
  always @(posedge clk)
    ui__tb_fanout_flags__trigger <= \ui__tb_fanout_flags__trigger$next ;
  always @(posedge clk)
    rst <= \rst$next ;
  always @(posedge sync_1e6_clk)
    i_button_ffsync_i_unsync_buttons__pwr <= \i_button_ffsync_i_unsync_buttons__pwr$next ;
  always @(posedge sync_1e6_clk)
    i_button_ffsync_i_unsync_buttons__fireA <= \i_button_ffsync_i_unsync_buttons__fireA$next ;
  always @(posedge sync_1e6_clk)
    i_button_ffsync_i_unsync_buttons__fireB <= \i_button_ffsync_i_unsync_buttons__fireB$next ;
  always @(posedge sync_1e6_clk)
    i_button_ffsync_i_unsync_buttons__up <= \i_button_ffsync_i_unsync_buttons__up$next ;
  always @(posedge sync_1e6_clk)
    i_button_ffsync_i_unsync_buttons__down <= \i_button_ffsync_i_unsync_buttons__down$next ;
  always @(posedge sync_1e6_clk)
    i_button_ffsync_i_unsync_buttons__left <= \i_button_ffsync_i_unsync_buttons__left$next ;
  always @(posedge sync_1e6_clk)
    i_button_ffsync_i_unsync_buttons__right <= \i_button_ffsync_i_unsync_buttons__right$next ;
  assign \$11  = ! (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:37" *) clk_counter;
  assign \$10  = \$11  ? (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:37" *) \$8  : sync_1e6_clk;
  assign \$18  = \$14  & (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" *) \$16 ;
  assign \$20  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *) pin_uart_0__dtr_uart_0__dtr__i;
  assign \$22  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *) pin_uart_0__rts_uart_0__rts__i;
  assign \$24  = \$20  & (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:125" *) \$22 ;
  assign \$28  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *) pin_uart_0__rts_uart_0__rts__i;
  assign \$2  = clk_counter + (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:36" *) 1'h1;
  assign \$30  = \$26  & (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:128" *) \$28 ;
  assign \$32  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *) pin_uart_0__dtr_uart_0__dtr__i;
  assign \$36  = \$32  & (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:131" *) \$34 ;
  assign \$38  = ~ (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:123" *) i_button_ffsync_i_buttons__pwr;
  assign \$42  = ~ (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:126" *) i_button_ffsync_i_buttons__pwr;
  assign \$46  = ~ (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:129" *) i_button_ffsync_i_buttons__pwr;
  assign \$50  = ~ (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:132" *) i_button_ffsync_i_buttons__pwr;
  assign \$58  = \$54  & (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" *) \$56 ;
  assign \$5  = clk_counter == (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:36" *) 4'hb;
  assign \$60  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *) pin_uart_0__dtr_uart_0__dtr__i;
  assign \$62  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *) pin_uart_0__rts_uart_0__rts__i;
  assign \$64  = \$60  & (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:125" *) \$62 ;
  assign \$68  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *) pin_uart_0__rts_uart_0__rts__i;
  assign \$4  = \$5  ? (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:36" *) 5'h00 : \$2 ;
  assign \$70  = \$66  & (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:128" *) \$68 ;
  assign \$72  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/rec.py:258" *) pin_uart_0__dtr_uart_0__dtr__i;
  assign \$76  = \$72  & (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:131" *) \$74 ;
  assign \$78  = ~ (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/ast.py:1369" *) \$sample$s$start$sync$1 ;
  assign \$80  = \$78  & (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/ast.py:1369" *) start;
  assign \$82  = + (* src = "amaram/sdram_n_fifo_interface/controller_refresh.py:544" *) { i_button_ffsync_i_buttons__left, i_button_ffsync_i_buttons__right, ui__tb_fanin_flags__in_performing_refresh, ui__tb_fanin_flags__in_requesting_refresh, ui__tb_fanin_flags__in_normal_operation };
  always @(posedge clk)
    \$sample$s$start$sync$1  <= \$sample$s$start$sync$1$next ;
  always @(posedge clk)
    clk_counter <= \clk_counter$next ;
  always @(posedge clk)
    sync_1e6_clk <= \sync_1e6_clk$next ;
  always @(posedge clk)
    pin_esp32_spi_0__tx_esp32_spi_0__tx__o <= \pin_esp32_spi_0__tx_esp32_spi_0__tx__o$next ;
  always @(posedge clk)
    pin_uart_0__tx_uart_0__tx__o <= \pin_uart_0__tx_uart_0__tx__o$next ;
  always @(posedge clk)
    pin_esp32_spi_0__en_esp32_spi_0__en__o <= \pin_esp32_spi_0__en_esp32_spi_0__en__o$next ;
  assign \$8  = ~ (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/clks.py:37" *) sync_1e6_clk;
  always @(posedge clk)
    pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o <= \pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o$next ;
  always @(posedge clk)
    ui__tb_fanin_flags__in_normal_operation <= \ui__tb_fanin_flags__in_normal_operation$next ;
  always @(posedge clk)
    ui__tb_fanin_flags__in_requesting_refresh <= \ui__tb_fanin_flags__in_requesting_refresh$next ;
  always @(posedge clk)
    ui__tb_fanin_flags__in_performing_refresh <= \ui__tb_fanin_flags__in_performing_refresh$next ;
  always @(posedge clk)
    tb_ui__tb_fanout_flags__trigger <= \tb_ui__tb_fanout_flags__trigger$next ;
  always @(posedge clk)
    ui__request_to_refresh_soon <= \ui__request_to_refresh_soon$next ;
  always @(posedge clk)
    tb_ui__enable_refresh <= \tb_ui__enable_refresh$next ;
  always @(posedge clk)
    ui__refresh_in_progress <= \ui__refresh_in_progress$next ;
  always @(posedge clk)
    ui__refresh_lapsed <= \ui__refresh_lapsed$next ;
  always @(posedge clk)
    start <= \start$next ;
  ecp5pll ecp5pll (
    .clk(clk),
    .clk25_0__io(clk25_0__io),
    .sdram_clk(ecp5pll_sdram_clk)
  );
  i_button_ffsync i_button_ffsync (
    .clk(clk),
    .i_buttons__left(i_button_ffsync_i_buttons__left),
    .i_buttons__pwr(i_button_ffsync_i_buttons__pwr),
    .i_buttons__right(i_button_ffsync_i_buttons__right),
    .i_unsync_buttons__down(i_button_ffsync_i_unsync_buttons__down),
    .i_unsync_buttons__fireA(i_button_ffsync_i_unsync_buttons__fireA),
    .i_unsync_buttons__fireB(i_button_ffsync_i_unsync_buttons__fireB),
    .i_unsync_buttons__left(i_button_ffsync_i_unsync_buttons__left),
    .i_unsync_buttons__pwr(i_button_ffsync_i_unsync_buttons__pwr),
    .i_unsync_buttons__right(i_button_ffsync_i_unsync_buttons__right),
    .i_unsync_buttons__up(i_button_ffsync_i_unsync_buttons__up),
    .rst(rst)
  );
  pin_button_down_0 pin_button_down_0 (
    .button_down_0__i(pin_button_down_0_button_down_0__i),
    .button_down_0__io(button_down_0__io)
  );
  pin_button_fire_0 pin_button_fire_0 (
    .button_fire_0__i(pin_button_fire_0_button_fire_0__i),
    .button_fire_0__io(button_fire_0__io)
  );
  pin_button_fire_1 pin_button_fire_1 (
    .button_fire_1__i(pin_button_fire_1_button_fire_1__i),
    .button_fire_1__io(button_fire_1__io)
  );
  pin_button_left_0 pin_button_left_0 (
    .button_left_0__i(pin_button_left_0_button_left_0__i),
    .button_left_0__io(button_left_0__io)
  );
  pin_button_pwr_0 pin_button_pwr_0 (
    .button_pwr_0__i(pin_button_pwr_0_button_pwr_0__i),
    .button_pwr_0__io(button_pwr_0__io)
  );
  pin_button_right_0 pin_button_right_0 (
    .button_right_0__i(pin_button_right_0_button_right_0__i),
    .button_right_0__io(button_right_0__io)
  );
  pin_button_up_0 pin_button_up_0 (
    .button_up_0__i(pin_button_up_0_button_up_0__i),
    .button_up_0__io(button_up_0__io)
  );
  pin_esp32_spi_0__en pin_esp32_spi_0__en (
    .esp32_spi_0__en__io(esp32_spi_0__en__io),
    .esp32_spi_0__en__o(pin_esp32_spi_0__en_esp32_spi_0__en__o)
  );
  pin_esp32_spi_0__gpio0 pin_esp32_spi_0__gpio0 (
    .esp32_spi_0__gpio0__io(esp32_spi_0__gpio0__io),
    .esp32_spi_0__gpio0__o(pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o)
  );
  pin_esp32_spi_0__gpio12_cipo pin_esp32_spi_0__gpio12_cipo (
    .esp32_spi_0__gpio12_cipo__io(esp32_spi_0__gpio12_cipo__io)
  );
  pin_esp32_spi_0__gpio16_sclk pin_esp32_spi_0__gpio16_sclk (
    .esp32_spi_0__gpio16_sclk__io(esp32_spi_0__gpio16_sclk__io)
  );
  pin_esp32_spi_0__gpio4_copi pin_esp32_spi_0__gpio4_copi (
    .esp32_spi_0__gpio4_copi__io(esp32_spi_0__gpio4_copi__io)
  );
  pin_esp32_spi_0__gpio5_cs pin_esp32_spi_0__gpio5_cs (
    .esp32_spi_0__gpio5_cs__io(esp32_spi_0__gpio5_cs__io)
  );
  pin_esp32_spi_0__rx pin_esp32_spi_0__rx (
    .esp32_spi_0__rx__i(pin_esp32_spi_0__rx_esp32_spi_0__rx__i),
    .esp32_spi_0__rx__io(esp32_spi_0__rx__io)
  );
  pin_esp32_spi_0__tx pin_esp32_spi_0__tx (
    .esp32_spi_0__tx__io(esp32_spi_0__tx__io),
    .esp32_spi_0__tx__o(pin_esp32_spi_0__tx_esp32_spi_0__tx__o)
  );
  pin_led_0 pin_led_0 (
    .led_0__io(led_0__io),
    .led_0__o(pin_led_0_led_0__o)
  );
  pin_led_1 pin_led_1 (
    .led_1__io(led_1__io),
    .led_1__o(pin_led_1_led_1__o)
  );
  pin_led_2 pin_led_2 (
    .led_2__io(led_2__io),
    .led_2__o(pin_led_2_led_2__o)
  );
  pin_led_3 pin_led_3 (
    .led_3__io(led_3__io),
    .led_3__o(pin_led_3_led_3__o)
  );
  pin_led_4 pin_led_4 (
    .led_4__io(led_4__io),
    .led_4__o(pin_led_4_led_4__o)
  );
  pin_led_5 pin_led_5 (
    .led_5__io(led_5__io),
    .led_5__o(pin_led_5_led_5__o)
  );
  pin_led_6 pin_led_6 (
    .led_6__io(led_6__io),
    .led_6__o(pin_led_6_led_6__o)
  );
  pin_led_7 pin_led_7 (
    .led_7__io(led_7__io),
    .led_7__o(pin_led_7_led_7__o)
  );
  pin_uart_0__dtr pin_uart_0__dtr (
    .uart_0__dtr__i(pin_uart_0__dtr_uart_0__dtr__i),
    .uart_0__dtr__io(uart_0__dtr__io)
  );
  pin_uart_0__rts pin_uart_0__rts (
    .uart_0__rts__i(pin_uart_0__rts_uart_0__rts__i),
    .uart_0__rts__io(uart_0__rts__io)
  );
  pin_uart_0__rx pin_uart_0__rx (
    .uart_0__rx__i(pin_uart_0__rx_uart_0__rx__i),
    .uart_0__rx__io(uart_0__rx__io)
  );
  pin_uart_0__tx pin_uart_0__tx (
    .uart_0__tx__io(uart_0__tx__io),
    .uart_0__tx__o(pin_uart_0__tx_uart_0__tx__o)
  );
  tb tb (
    .sdram_clk(ecp5pll_sdram_clk),
    .ui__enable_refresh(tb_ui__enable_refresh),
    .ui__refresh_in_progress(tb_ui__refresh_in_progress),
    .ui__refresh_lapsed(tb_ui__refresh_lapsed),
    .ui__request_to_refresh_soon(tb_ui__request_to_refresh_soon),
    .ui__tb_fanin_flags__in_normal_operation(tb_ui__tb_fanin_flags__in_normal_operation),
    .ui__tb_fanin_flags__in_performing_refresh(tb_ui__tb_fanin_flags__in_performing_refresh),
    .ui__tb_fanin_flags__in_requesting_refresh(tb_ui__tb_fanin_flags__in_requesting_refresh),
    .ui__tb_fanout_flags__trigger(tb_ui__tb_fanout_flags__trigger)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \clk_counter$next  = \$4 [3:0];
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \clk_counter$next  = 4'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \sync_1e6_clk$next  = \$10 ;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \sync_1e6_clk$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \pin_uart_0__tx_uart_0__tx__o$next  = pin_esp32_spi_0__rx_esp32_spi_0__rx__i;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \pin_uart_0__tx_uart_0__tx__o$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \pin_esp32_spi_0__en_esp32_spi_0__en__o$next  = pin_esp32_spi_0__en_esp32_spi_0__en__o;
    (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" *)
    casez ({ \$36 , \$30 , \$24 , \$18  })
      /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" */
      4'b???1:
          \pin_esp32_spi_0__en_esp32_spi_0__en__o$next  = \$40 ;
      /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:125" */
      4'b??1?:
          \pin_esp32_spi_0__en_esp32_spi_0__en__o$next  = \$44 ;
      /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:128" */
      4'b?1??:
          \pin_esp32_spi_0__en_esp32_spi_0__en__o$next  = \$48 ;
      /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:131" */
      4'b1???:
          \pin_esp32_spi_0__en_esp32_spi_0__en__o$next  = \$52 ;
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \pin_esp32_spi_0__en_esp32_spi_0__en__o$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o$next  = pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o;
    (* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" *)
    casez ({ \$76 , \$70 , \$64 , \$58  })
      /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:122" */
      4'b???1:
          \pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o$next  = 1'h1;
      /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:125" */
      4'b??1?:
          \pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o$next  = 1'h1;
      /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:128" */
      4'b?1??:
          \pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o$next  = 1'h1;
      /* src = "/home/ubuntu/from_host/x/Documents/git_repos/gateware/amtest/amtest/boards/ulx3s/common/upload.py:131" */
      4'b1???:
          \pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o$next  = 1'h0;
    endcase
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \pin_esp32_spi_0__gpio0_esp32_spi_0__gpio0__o$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \ui__tb_fanin_flags__in_normal_operation$next  = tb_ui__tb_fanin_flags__in_normal_operation;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \ui__tb_fanin_flags__in_normal_operation$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \ui__tb_fanin_flags__in_requesting_refresh$next  = tb_ui__tb_fanin_flags__in_requesting_refresh;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \ui__tb_fanin_flags__in_requesting_refresh$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \ui__tb_fanin_flags__in_performing_refresh$next  = tb_ui__tb_fanin_flags__in_performing_refresh;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \ui__tb_fanin_flags__in_performing_refresh$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \tb_ui__tb_fanout_flags__trigger$next  = ui__tb_fanout_flags__trigger;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \tb_ui__tb_fanout_flags__trigger$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \ui__request_to_refresh_soon$next  = tb_ui__request_to_refresh_soon;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \ui__request_to_refresh_soon$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \tb_ui__enable_refresh$next  = 1'h0;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \tb_ui__enable_refresh$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \ui__refresh_in_progress$next  = tb_ui__refresh_in_progress;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \ui__refresh_in_progress$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \i_button_ffsync_i_unsync_buttons__pwr$next  = pin_button_pwr_0_button_pwr_0__i;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sync_1e6_rst)
      1'h1:
          \i_button_ffsync_i_unsync_buttons__pwr$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \ui__refresh_lapsed$next  = tb_ui__refresh_lapsed;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \ui__refresh_lapsed$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \start$next  = i_button_ffsync_i_buttons__left;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \start$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \ui__tb_fanout_flags__trigger$next  = \$80 ;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \ui__tb_fanout_flags__trigger$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \rst$next  = i_button_ffsync_i_buttons__right;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \rst$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \i_button_ffsync_i_unsync_buttons__fireA$next  = pin_button_fire_0_button_fire_0__i;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sync_1e6_rst)
      1'h1:
          \i_button_ffsync_i_unsync_buttons__fireA$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \i_button_ffsync_i_unsync_buttons__fireB$next  = pin_button_fire_1_button_fire_1__i;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sync_1e6_rst)
      1'h1:
          \i_button_ffsync_i_unsync_buttons__fireB$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \i_button_ffsync_i_unsync_buttons__up$next  = pin_button_up_0_button_up_0__i;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sync_1e6_rst)
      1'h1:
          \i_button_ffsync_i_unsync_buttons__up$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \i_button_ffsync_i_unsync_buttons__down$next  = pin_button_down_0_button_down_0__i;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sync_1e6_rst)
      1'h1:
          \i_button_ffsync_i_unsync_buttons__down$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \i_button_ffsync_i_unsync_buttons__left$next  = pin_button_left_0_button_left_0__i;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sync_1e6_rst)
      1'h1:
          \i_button_ffsync_i_unsync_buttons__left$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \i_button_ffsync_i_unsync_buttons__right$next  = pin_button_right_0_button_right_0__i;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (sync_1e6_rst)
      1'h1:
          \i_button_ffsync_i_unsync_buttons__right$next  = 1'h0;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2083:dump_module$4 ) begin end
    \pin_esp32_spi_0__tx_esp32_spi_0__tx__o$next  = pin_uart_0__rx_uart_0__rx__i;
    (* src = "/home/ubuntu/Documents/venv_fpga/lib/python3.8/site-packages/amaranth/hdl/xfrm.py:519" *)
    casez (rst)
      1'h1:
          \pin_esp32_spi_0__tx_esp32_spi_0__tx__o$next  = 1'h0;
    endcase
  end
  assign \$1  = \$4 ;
  assign sync_1e6_rst = 1'h0;
  assign ui__enable_refresh = 1'h0;
  assign \$sample$s$start$sync$1$next  = start;
  assign { pin_led_7_led_7__o, pin_led_6_led_6__o, pin_led_5_led_5__o, pin_led_4_led_4__o, pin_led_3_led_3__o, pin_led_2_led_2__o, pin_led_1_led_1__o, pin_led_0_led_0__o } = \$82 ;
  assign \$14  = pin_uart_0__dtr_uart_0__dtr__i;
  assign \$16  = pin_uart_0__rts_uart_0__rts__i;
  assign \$26  = pin_uart_0__dtr_uart_0__dtr__i;
  assign \$34  = pin_uart_0__rts_uart_0__rts__i;
  assign \$40  = \$38 ;
  assign \$44  = \$42 ;
  assign \$48  = 1'h0;
  assign \$52  = \$50 ;
  assign \$54  = pin_uart_0__dtr_uart_0__dtr__i;
  assign \$56  = pin_uart_0__rts_uart_0__rts__i;
  assign \$66  = pin_uart_0__dtr_uart_0__dtr__i;
  assign \$74  = pin_uart_0__rts_uart_0__rts__i;
endmodule
